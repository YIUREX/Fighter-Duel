<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fighter Duel</title>
<style>
  body { margin:0; background:#111; color:#fff; font-family:sans-serif; text-align:center; overflow:hidden; }
  canvas { background:#333; display:block; margin:0 auto; }
  #hud { position:absolute; top:0; left:0; right:0; padding:5px; background:rgba(0,0,0,0.5); display:flex; justify-content:space-between; font-size:18px; }
  #mobileControls { position:fixed; bottom:10px; left:0; right:0; display:flex; justify-content:center; gap:10px; z-index:10; flex-wrap:wrap; }
  .btn { background:rgba(255,255,255,0.2); border:1px solid #fff; color:#fff; padding:20px; border-radius:50%; font-size:20px; user-select:none; }
</style>
</head>
<body>
<div id="hud">
  <div id="p1Stats">P1 ‚ù§Ô∏è100 ‚ö°100</div>
  <div id="timer">60</div>
  <div id="p2Stats">P2 ‚ù§Ô∏è100 ‚ö°100</div>
</div>
<canvas id="game" width="800" height="400"></canvas>

<!-- Controles t√°ctiles -->
<div id="mobileControls" style="display:none;">
  <div class="btn" id="leftBtn">‚¨ÖÔ∏è</div>
  <div class="btn" id="rightBtn">‚û°Ô∏è</div>
  <div class="btn" id="blockBtn">üõ°Ô∏è</div>
  <div class="btn" id="attackBtn">üëä</div>
  <div class="btn" id="skillBtn">üí•</div>
</div>

<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');

// Mostrar controles si hay pantalla t√°ctil
if ('ontouchstart' in window) {
  document.getElementById('mobileControls').style.display = 'flex';
}

// Jugadores
let p1 = {x:100, y:300, hp:100, energy:100, color:'red', block:false, cooldown:0};
let p2 = {x:600, y:300, hp:100, energy:100, color:'blue', block:false, cooldown:0};

let keys = {};
let controls = {left:false, right:false, block:false, attack:false, skill:false};

// Eventos teclado
document.addEventListener('keydown', e => keys[e.key] = true);
document.addEventListener('keyup', e => keys[e.key] = false);

// Eventos t√°ctiles
function touchBind(btn, prop) {
  document.getElementById(btn).addEventListener('touchstart', e => { e.preventDefault(); controls[prop] = true; });
  document.getElementById(btn).addEventListener('touchend', e => { e.preventDefault(); controls[prop] = false; });
}
touchBind('leftBtn', 'left');
touchBind('rightBtn', 'right');
touchBind('blockBtn', 'block');
touchBind('attackBtn', 'attack');
touchBind('skillBtn', 'skill');

function updatePlayer(p, left, right, block, attack, skill) {
  // Movimiento
  if (left) p.x -= 3;
  if (right) p.x += 3;
  p.block = block;

  // Ataque b√°sico
  if (attack && p.cooldown <= 0) {
    p.cooldown = 20;
    if (Math.abs(p.x - enemyOf(p).x) < 60) {
      if (!enemyOf(p).block) enemyOf(p).hp -= 10;
      else enemyOf(p).hp -= 3; // bloque reduce da√±o
    }
  }

  // Habilidad especial
  if (skill && p.energy >= 30 && p.cooldown <= 0) {
    p.cooldown = 40;
    p.energy -= 30;
    if (Math.abs(p.x - enemyOf(p).x) < 100) {
      if (!enemyOf(p).block) enemyOf(p).hp -= 25;
      else enemyOf(p).hp -= 10;
    }
  }

  // L√≠mite de vida/energ√≠a
  p.hp = Math.max(0, Math.min(100, p.hp));
  p.energy = Math.max(0, Math.min(100, p.energy));

  // Recuperar energ√≠a poco a poco
  if (p.energy < 100) p.energy += 0.2;
  
  // Cooldown
  if (p.cooldown > 0) p.cooldown--;
}

function enemyOf(p) { return p === p1 ? p2 : p1; }

function drawPlayer(p) {
  ctx.fillStyle = p.color;
  ctx.fillRect(p.x, p.y, 50, 50);
}

function loop() {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  
  // Actualizar jugadores
  updatePlayer(p1, keys['a'] || controls.left, keys['d'] || controls.right, keys['s'] || controls.block, keys['j'] || controls.attack, keys['k'] || controls.skill);
  updatePlayer(p2, keys['ArrowLeft'], keys['ArrowRight'], keys['ArrowDown'], keys['/'], keys['.']);
  
  // Dibujar
  drawPlayer(p1);
  drawPlayer(p2);

  // HUD
  document.getElementById('p1Stats').textContent = `P1 ‚ù§Ô∏è${Math.floor(p1.hp)} ‚ö°${Math.floor(p1.energy)}`;
  document.getElementById('p2Stats').textContent = `P2 ‚ù§Ô∏è${Math.floor(p2.hp)} ‚ö°${Math.floor(p2.energy)}`;

  requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>
